<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Item Selection</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-200 p-8">

<!-- Dynamically generated items -->
<div id="item-container" class="flex flex-wrap">
  <!-- Items will be dynamically added here -->
</div>

<!-- Selected items table -->
<div class="mt-4">
  <h2 class="text-xl font-bold mb-2">Selected Items</h2>
  <table id="selected-items-table" class="table-auto">
    <thead>
      <tr>
        <th class="px-4 py-2">Item</th>
        <th class="px-4 py-2">Cost</th>
      </tr>
    </thead>
    <tbody id="selected-items-body"></tbody>
    <tfoot>
      <tr>
        <td class="px-4 py-2 font-bold">Total:</td>
        <td id="total-amount" class="px-4 py-2 font-bold">0$</td>
      </tr>
    </tfoot>
  </table>
</div>

<script>
  const itemCount = 40;
  const itemCost = 500;
  const maxItemsSelected = 4;
  let selectedItems = [];

  function handleItemClick(item) {
    const isSelected = item.classList.toggle('bg-blue-500');

    if (isSelected) {
      selectedItems.push(item);
    } else {
      selectedItems = selectedItems.filter(selectedItem => selectedItem !== item);
    }

    if (selectedItems.length > maxItemsSelected) {
      item.classList.remove('bg-blue-500');
      selectedItems = selectedItems.filter(selectedItem => selectedItem !== item);
    }

    updateSelectedItemsTable();
  }

  function updateSelectedItemsTable() {
    const selectedItemsBody = document.getElementById('selected-items-body');
    const totalAmountElement = document.getElementById('total-amount');

    // Clear previous entries
    selectedItemsBody.innerHTML = '';

    let totalAmount = 0;

    // Add selected items to the table
    selectedItems.forEach((item, index) => {
      const itemName = `Item ${index + 1}`;
      const itemCost = `${itemCost}$`;

      const row = document.createElement('tr');
      row.innerHTML = `<td class="px-4 py-2">${itemName}</td><td class="px-4 py-2">${itemCost}</td>`;
      selectedItemsBody.appendChild(row);

      totalAmount += itemCost;
    });

    // Update total amount
    totalAmountElement.textContent = `${totalAmount}$`;
  }

  const itemContainer = document.getElementById('item-container');

  // Generate items dynamically
  for (let i = 1; i <= itemCount; i++) {
    const item = document.createElement('div');
    item.classList.add('bg-green-300', 'text-white', 'py-2', 'px-4', 'rounded-md', 'm-2', 'cursor-pointer');
    item.textContent = `Item ${i} - ${itemCost}$`;
    item.addEventListener('click', () => handleItemClick(item));
    itemContainer.appendChild(item);
  }
</script>

</body>
</html>
